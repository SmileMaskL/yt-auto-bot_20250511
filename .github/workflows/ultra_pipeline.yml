name: ðŸ¤– 24/7 AI Tube Factory

on:
  schedule:
    - cron: '0 */4 * * *'  # 4ì‹œê°„ ì£¼ê¸° ì‹¤í–‰
  workflow_dispatch:
    inputs:
      daily_upload:
        description: 'ì¼ì¼ ì—…ë¡œë“œ ìˆ˜'
        default: '20'

jobs:
  production:
    runs-on: ubuntu-latest
    env:
      GCP_PROJECT: ${{ secrets.GCP_PROJECT }}
      TZ: Asia/Seoul
    
    steps:
    - name: ðŸ”„ ì €ìž¥ì†Œ ë™ê¸°í™”
      uses: actions/checkout@v4

    - name: ðŸ›¡ï¸ GCP ì¸ì¦
      run: |
        echo "${{ secrets.GCP_SA_KEY }}" > config/gcp_credentials.json
        
    - name: ðŸš€ AI ì—”ì§„ ì‹¤í–‰
      run: |
        python src/main.py \
          --upload-count ${{ inputs.daily_upload }} \
          --resolution 1080p
